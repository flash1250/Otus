Установка postgresql (папка манифестов helmmanifests)

helm repo update

kubectl apply -f postgres-pv.yaml
kubectl apply -f postgres-pvc.yaml

helm install postgresql bitnami/postgresql --set persistence.existingClaim=postgresql-pv-claim --set volumePermissions.enabled=true -f values.yaml

После запуска пода:
kubectl exec -it postgresql-0 -- psql -h localhost -U otuspostgres --password -p 5432 otuspostgres
Password: otuspostgres

При удачном подключении выполнить скрипт:
CREATE TABLE IF NOT EXISTS public.users
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    user_name text COLLATE pg_catalog."default",
    first_name text COLLATE pg_catalog."default",
    last_name text COLLATE pg_catalog."default",
    email text COLLATE pg_catalog."default",
    phone text COLLATE pg_catalog."default"
);

Установка приложения (папка манифестов manifests)

kubectl apply -f deployment.yaml
kubectl apply -f service.yaml
kubectl apply -f ingress.yaml
kubectl apply -f secrets.yaml
